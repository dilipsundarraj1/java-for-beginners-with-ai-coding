<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="780" viewBox="0 0 1200 780" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 22px "Segoe UI", Roboto, Arial, sans-serif; fill: #111; }
      .subtitle { font: 600 16px "Segoe UI", Roboto, Arial, sans-serif; fill: #222; }
      .label { font: 600 14px "Segoe UI", Roboto, Arial, sans-serif; fill: #222; }
      .code { font: 500 12px ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; fill: #333; }
      .small { font: 500 12px "Segoe UI", Roboto, Arial, sans-serif; fill: #444; }
      .stack { fill: #eef6ff; stroke: #7fb3ff; }
      .heap { fill: #eefaf2; stroke: #78d39b; }
      .var { fill: #ffffff; stroke: #5b89f7; rx: 8; }
      .obj { fill: #ffffff; stroke: #29b36f; rx: 10; }
      .arrow { stroke: #555; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .mutate { stroke: #c03; stroke-width: 2.5; }
      .panel { fill: #ffffff; stroke: #e5e7eb; rx: 14; }
      .hint { fill: #6b7280; font: 500 11px "Segoe UI", Roboto, Arial, sans-serif; }
      .legend { fill: #f8fafc; stroke: #e5e7eb; rx: 10; }
    </style>
    <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="8" refY="4" orient="auto">
      <polygon points="0,0 8,4 0,8" fill="#555"/>
    </marker>
  </defs>

  <!-- Header -->
  <text x="600" y="36" text-anchor="middle" class="title">
    Java OOP: Object Creation, Assignment, Aliasing &amp; Reassignment
  </text>
  <text x="600" y="60" text-anchor="middle" class="small">
    Variables hold references (on the stack) that point to objects (on the heap)
  </text>

  <!-- Tiny legend / explanation -->
  <g>
    <rect x="260" y="70" width="680" height="56" class="legend"/>
    <!-- Swatches -->
    <rect x="280" y="84" width="18" height="12" class="stack" rx="3"/>
    <text x="305" y="94" class="small">Stack: Per-thread memory for method frames, local variables, and references.</text>

    <rect x="280" y="104" width="18" height="12" class="heap" rx="3"/>
    <text x="305" y="114" class="small">Heap: Shared memory where objects live; accessed via references; garbage-collected.</text>
  </g>

  <!-- Panels grid (2 x 2) -->
  <!-- Panel 1 -->
  <g transform="translate(40,140)">
    <rect width="540" height="300" class="panel"/>
    <text x="20" y="28" class="subtitle">1) Creation</text>
    <text x="20" y="50" class="code">Movie m1 = new Movie();</text>

    <!-- Stack label -->
    <rect x="20" y="70" width="200" height="210" class="stack" rx="12"/>
    <text x="30" y="92" class="label">Stack (references)</text>

    <!-- Heap label -->
    <rect x="260" y="70" width="260" height="210" class="heap" rx="12"/>
    <text x="270" y="92" class="label">Heap (objects)</text>

    <!-- Variable m1 -->
    <rect x="40" y="120" width="160" height="44" class="var"/>
    <text x="120" y="146" text-anchor="middle" class="label">m1 : Movie</text>

    <!-- Object #1 -->
    <rect x="280" y="120" width="220" height="120" class="obj"/>
    <text x="390" y="144" text-anchor="middle" class="label">Movie object #1</text>
    <text x="300" y="170" class="small">title: null</text>
    <text x="300" y="190" class="small">duration: 0</text>
    <text x="300" y="210" class="small">genre: null, rating: 0.0</text>

    <!-- Arrow m1 -> object #1 -->
    <path d="M200,142 C230,142 250,142 280,142" class="arrow"/>
  </g>

  <!-- Panel 2 -->
  <g transform="translate(620,140)">
    <rect width="540" height="300" class="panel"/>
    <text x="20" y="28" class="subtitle">2) Assignment → alias</text>
    <text x="20" y="50" class="code">Movie a = m1; // both refer to the same object</text>

    <rect x="20" y="70" width="200" height="210" class="stack" rx="12"/>
    <text x="30" y="92" class="label">Stack (references)</text>

    <rect x="260" y="70" width="260" height="210" class="heap" rx="12"/>
    <text x="270" y="92" class="label">Heap (objects)</text>

    <!-- Variables m1 and a -->
    <rect x="40" y="120" width="160" height="44" class="var"/>
    <text x="120" y="146" text-anchor="middle" class="label">m1 : Movie</text>

    <rect x="40" y="180" width="160" height="44" class="var"/>
    <text x="120" y="206" text-anchor="middle" class="label">a : Movie</text>

    <!-- Object #1 -->
    <rect x="280" y="120" width="220" height="120" class="obj"/>
    <text x="390" y="144" text-anchor="middle" class="label">Movie object #1</text>
    <text x="300" y="170" class="small">title: "The Matrix"</text>
    <text x="300" y="190" class="small">duration: 136, genre: "Sci‑Fi"</text>
    <text x="300" y="210" class="small">rating: 8.7</text>

    <!-- Arrows m1 & a -> object #1 -->
    <path d="M200,142 C230,142 250,142 280,142" class="arrow"/>
    <path d="M200,202 C230,202 250,182 280,170" class="arrow"/>

    <!-- Alias hint -->
    <text x="20" y="290" class="hint">Aliasing: two names, one object</text>
  </g>

  <!-- Panel 3 -->
  <g transform="translate(40,470)">
    <rect width="540" height="300" class="panel"/>
    <text x="20" y="28" class="subtitle">3) Mutate via alias</text>
    <text x="20" y="50" class="code">a.rating = 9.0; // visible through m1 as well</text>

    <rect x="20" y="70" width="200" height="210" class="stack" rx="12"/>
    <text x="30" y="92" class="label">Stack (references)</text>

    <rect x="260" y="70" width="260" height="210" class="heap" rx="12"/>
    <text x="270" y="92" class="label">Heap (objects)</text>

    <!-- Variables m1 and a -->
    <rect x="40" y="120" width="160" height="44" class="var"/>
    <text x="120" y="146" text-anchor="middle" class="label">m1 : Movie</text>

    <rect x="40" y="180" width="160" height="44" class="var"/>
    <text x="120" y="206" text-anchor="middle" class="label">a : Movie</text>

    <!-- Object #1 (mutated) -->
    <rect x="280" y="120" width="220" height="120" class="obj"/>
    <text x="390" y="144" text-anchor="middle" class="label">Movie object #1</text>
    <text x="300" y="170" class="small">title: "The Matrix"</text>
    <text x="300" y="190" class="small">duration: 136, genre: "Sci‑Fi"</text>
    <text x="300" y="210" class="small" fill="#c03">rating: 9.0</text>

    <!-- Arrows m1 & a -> object #1 -->
    <path d="M200,142 C230,142 250,142 280,142" class="arrow"/>
    <path d="M200,202 C230,202 250,182 280,170" class="arrow"/>

    <!-- Emphasis line to show mutation -->
    <line x1="295" y1="206" x2="480" y2="206" class="mutate"/>
  </g>

  <!-- Panel 4 -->
  <g transform="translate(620,470)">
    <rect width="540" height="300" class="panel"/>
    <text x="20" y="28" class="subtitle">4) Reassignment</text>
    <text x="20" y="50" class="code">m1 = new Movie(); // a still points to object #1</text>

    <rect x="20" y="70" width="200" height="210" class="stack" rx="12"/>
    <text x="30" y="92" class="label">Stack (references)</text>

    <rect x="260" y="70" width="260" height="210" class="heap" rx="12"/>
    <text x="270" y="92" class="label">Heap (objects)</text>

    <!-- Variables m1 and a -->
    <rect x="40" y="120" width="160" height="44" class="var"/>
    <text x="120" y="146" text-anchor="middle" class="label">m1 : Movie</text>

    <rect x="40" y="180" width="160" height="44" class="var"/>
    <text x="120" y="206" text-anchor="middle" class="label">a : Movie</text>

    <!-- Object #1 (old) -->
    <rect x="280" y="110" width="220" height="120" class="obj"/>
    <text x="390" y="134" text-anchor="middle" class="label">Movie object #1</text>
    <text x="300" y="160" class="small">title: "The Matrix"</text>
    <text x="300" y="180" class="small">duration: 136, genre: "Sci‑Fi"</text>
    <text x="300" y="200" class="small">rating: 9.0</text>

    <!-- Object #2 (new) -->
    <rect x="280" y="240" width="220" height="100" class="obj"/>
    <text x="390" y="262" text-anchor="middle" class="label">Movie object #2</text>
    <text x="300" y="286" class="small">title: null, duration: 0</text>

    <!-- Arrows: a -> object #1, m1 -> object #2 -->
    <path d="M200,202 C230,202 250,182 280,170" class="arrow"/>
    <path d="M200,142 C230,142 250,262 280,275" class="arrow"/>

    <text x="20" y="290" class="hint">Reassignment changes which object a variable refers to.</text>
  </g>

  <!-- Footer note -->
  <text x="600" y="760" text-anchor="middle" class="hint">
    Tip: Method parameters copy the reference, not the object; mutating inside a method affects the original.
  </text>
</svg>
